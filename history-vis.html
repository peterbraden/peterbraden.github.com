<html>
	<head>
		<title>History, Visualised</title>
		<script src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
		<style type='text/css'>
body{font-family:'helvetica', sans; font-size:10px; background-color:#ddd; color:#444;}

p.dat{
	position:  absolute;
	padding:0;
	margin:0;
	overflow:hidden;
	font-size:8px;
	height:16px;
	border-right : 1px solid #f00;
	border-left : 1px solid #f00;
	}

#cont{position:relative; width:1000px; height:350px;}
#viewport{width:1000px; overflow-x:scroll; float:left;}
#detail{width:200px; float:right; border:1px solid #555; height:350px;}
		</style>
		 
		<script type='text/javascript'>

var history_data = [
	{begins : -40000, text : 'Cro-Magnons enter Europe from Near East', tag: ['europe']},
	{begins : -35000, text : 'First Americans cross from Asia', tag: ['americas']},
	{begins : -30000, text : 'Neanderthals disappear', tag: ['europe']},
	{begins : -30000, text : 'People reach Australia', tag: ['australia']},
	{begins : -25000, text : 'Cave Dwellers in Brazil', tag: ['americas']},
	{begins : -5000, text : 'Maize grown in Mexico', tag: ['americas', 'farming']},
	{begins : -3500, text : 'Potatoes grown in South America', tag: ['americas', 'farming']},
	{begins : -3372, text : 'First date in Mayan Calendar', tag: ['americas', 'science']},
	{begins : -2575, ends : -2134, text : 'Old Kingdom of Egypt', tag: ['egypt']},
	{begins : -2200, ends : -1450, text : 'Minoan Civilisation', tag: ['europe']},
	{begins : -2040, ends : -1640, text : 'Middle Kingdom of Egypt', tag: ['egypt']},
	{begins : -2000, text : 'Cotton grown in Peru', tag: ['americas', 'farming']},
	{begins : -1550, ends : -1070, text : 'New Kingdom of Egypt', tag: ['egypt']},
	{begins : -1500, text : 'Stone Temples built in Mexico', tag: ['americas']},
	{begins : -27, ends : 476, text : 'Roman Empire'},
	{begins : 0, text : 'Birth of Christ', tag: ['middle-east']},
	{begins : 330, ends : 1453, text : 'Byzantine Empire'},
	{begins : 1206, ends : 1368, text : 'Mongol Conquests'},
	{begins : 1583, ends : 1914, text : 'British Empire'},
	{begins : 1660, ends : 1662, text : 'Qing Dynasty conquers Ming Dynasty'},
	{begins : 1775, ends : 1783, text : 'American Revolutionary War'},
	{begins : 1789, ends : 1799, text : 'French Revolution'},
	{begins : 1803, ends : 1815, text : 'Napoleonic Wars'},
	{begins : 1914, ends : 1918, text : 'World War I'},
	{begins : 1939, ends : 1945, text : 'World War II'},
	{begins : 1945, ends : 1991, text : 'Cold War'},
	{begins : 1991, ends : 2001, text : 'Yugoslav Wars'},
	{begins : 2001, ends : 2010, text : 'War in Afghanistan'},
	{begins : 2010, text : 'Present day', detail : 'Created 27 December 2009'},
	
];


var history_people = [
	//Cyrus the Great
	{begins : "-576", ends : "-530",
	 text : "Cyrus The Great", 
	 href : 'http://en.wikipedia.org/wiki/Cyrus_the_Great' },
	 
	// Alexander The Great 
	{begins : "-356", ends : "-323", 
	text : "Alexander The Great", 
	href : 'http://en.wikipedia.org/wiki/Alexander_the_Great'},
	
	// Emperor Justinian
	{begins : "483", ends : "565-11-14",
	text : "Justinian",
	href : 'http://en.wikipedia.org/wiki/Justinian' },
	
	// Henry VIII
	{begins : "1491-06-28", ends : "1547-01-28",
	text : "Henry VIII of England", 
	href : "http://en.wikipedia.org/wiki/Henry_the_Eighth"},
	
	//Isaac Newton
	{begins : "1643-01-04", ends : "1727-03-31",
	text : "Isaac Newton",
	href : "http://en.wikipedia.org/wiki/Isaac_newton" },
	
	//Abraham Lincoln
	{begins : "1809-02-12", ends : "1865-04-15", 
	text : "Abraham Lincoln",
	href : "http://en.wikipedia.org/wiki/Abraham_Lincoln"
	},
	
	//Winston Churchill
	{begins : "1874-11-30", ends : "1965-01-24",
	text : "Winston Churchill", 
	href : "http://en.wikipedia.org/wiki/Churchill" }
]; 




$(function(){
	var parseTime = function(st){
		if ( st.indexOf('-') > 0 ){ //Not contained, or not first
			return parseInt(st.split('-')[0]);
		}
		
		//No dashes, assume int year
		return parseInt(st);
		
	} 


	$.each(history_people.sort(function(a,b){
			return parseTime(a['begins']) - parseTime(b['begins']);
		}), function(x){
			var d = this;
		
		if (this['ends']){
			var right = ((parseTime(d['ends']) - 2010) *0.38); //Math.log(1 - (parseTime(d['ends']) - 2010)) * 100;
			var width = ((parseTime(d['begins']) - 2010) *0.38)- right; //(Math.log(1 - (parseTime(d['begins']) - 2010)) * 100) - right;
			var bgcol = '#fbb';
		}else{
			var right = Math.log(1 - (parseTime(d['begins']) - 2010)) * 100;
			var width = '';
			var bgcol = 'transparent';
		};
		console.log(right);
		var data = $('<p class="dat">' + this['text'] + '</p>').css({
			right: Math.abs(right),
			width: Math.abs(width),
			'background-color':bgcol,
			top: (x%20)*14,
			cursor: d['detail'] ? 'pointer' : '',
		}).click(function(){
			if (d['detail']){
				$('#detail').html('<p>' + d['detail'] + '</p>');
			} else {
				$('#detail').html('');
			}	
		})

		$('#cont').append(data);
			
	});
	
});		
		
		</script>
	
	
	</head>
	<body>
		<div id ='viewport'>
			<div id="cont"></div>
		</div>
		<div id = 'detail'>
		</div>
	</body>
</html>		