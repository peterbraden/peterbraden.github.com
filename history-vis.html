<html>
	<head>
		<title>History, Visualised</title>
		<script src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
		<style type='text/css'>
body{font-family:'helvetica', sans; font-size:10px; background-color:#ddd; color:#444;}
#cont{position:relative; width:1200px; height:350px;}
#viewport{width:1000px; overflow-x:scroll; float:left;}
#detail{width:200px; float:right; border:1px solid #555; height:350px;}
		</style>
		 
		<script type='text/javascript'>

var history_data = [
	{begins : -40000, text : 'Cro-Magnons enter Europe from Near East', tag: ['europe']},
	{begins : -35000, text : 'First Americans cross from Asia', tag: ['americas']},
	{begins : -30000, text : 'Neanderthals disappear', tag: ['europe']},
	{begins : -30000, text : 'People reach Australia', tag: ['australia']},
	{begins : -25000, text : 'Cave Dwellers in Brazil', tag: ['americas']},
	{begins : -5000, text : 'Maize grown in Mexico', tag: ['americas', 'farming']},
	{begins : -3500, text : 'Potatoes grown in South America', tag: ['americas', 'farming']},
	{begins : -3372, text : 'First date in Mayan Calendar', tag: ['americas', 'science']},
	{begins : -2575, ends : -2134, text : 'Old Kingdom of Egypt', tag: ['egypt']},
	{begins : -2200, ends : -1450, text : 'Minoan Civilisation', tag: ['europe']},
	{begins : -2040, ends : -1640, text : 'Middle Kingdom of Egypt', tag: ['egypt']},
	{begins : -2000, text : 'Cotton grown in Peru', tag: ['americas', 'farming']},
	{begins : -1550, ends : -1070, text : 'New Kingdom of Egypt', tag: ['egypt']},
	{begins : -1500, text : 'Stone Temples built in Mexico', tag: ['americas']},
	{begins : -27, ends : 476, text : 'Roman Empire'},
	{begins : 0, text : 'Birth of Christ', tag: ['middle-east']},
	{begins : 330, ends : 1453, text : 'Byzantine Empire'},
	{begins : 1206, ends : 1368, text : 'Mongol Conquests'},
	{begins : 1583, ends : 1914, text : 'British Empire'},
	{begins : 1660, ends : 1662, text : 'Qing Dynasty conquers Ming Dynasty'},
	{begins : 1775, ends : 1783, text : 'American Revolutionary War'},
	{begins : 1789, ends : 1799, text : 'French Revolution'},
	{begins : 1803, ends : 1815, text : 'Napoleonic Wars'},
	{begins : 1914, ends : 1918, text : 'World War I'},
	{begins : 1939, ends : 1945, text : 'World War II'},
	{begins : 1945, ends : 1991, text : 'Cold War'},
	{begins : 1991, ends : 2001, text : 'Yugoslav Wars'},
	{begins : 2001, ends : 2010, text : 'War in Afghanistan'},
	{begins : 2010, text : 'Present day', detail : 'Created 27 December 2009'},
	
];





$(function(){
	$.each(history_data.sort(function(a,b){
			return a['begins'] - b['begins'];
		}), function(x){
			var d = this;
		
		if (this['ends']){
			var right = Math.log(1 - (d['ends'] - 2010)) * 100;
			var width = (Math.log(1 - (d['begins'] - 2010)) * 100) - right;
			var bgcol = '#999';
		}else{
			var right = Math.log(1 - (d['begins'] - 2010)) * 100;
			var width = '';
			var bgcol = 'transparent';
		};
		
		var data = $('<p>' + this['text'] + '</p>').css({
			position:'absolute',
			padding:0,
			margin:0, 
			right: right,
			width: width,
			height: '14px',
			'background-color':bgcol,
			'border-right': '1px solid #000',
			top: (x%20)*14,
			cursor: d['detail'] ? 'pointer' : '',
		}).click(function(){
			if (d['detail']){
				$('#detail').html('<p>' + d['detail'] + '</p>');
			} else {
				$('#detail').html('');
			}	
		})

		$('#cont').append(data);
			
	});
	
});		
		
		</script>
	
	
	</head>
	<body>
		<div id ='viewport'>
			<div id="cont"></div>
		</div>
		<div id = 'detail'>
		</div>
	</body>
</html>		